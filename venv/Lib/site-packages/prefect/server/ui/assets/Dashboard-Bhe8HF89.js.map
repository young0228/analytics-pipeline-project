{"version":3,"file":"Dashboard-Bhe8HF89.js","sources":["../../src/pages/Dashboard.vue"],"sourcesContent":["<template>\n  <p-layout-default class=\"workspace-dashboard\">\n    <template #header>\n      <PageHeading :crumbs=\"crumbs\" class=\"workspace-dashboard__page-heading\">\n        <template v-if=\"loaded && !empty\" #actions>\n          <div class=\"workspace-dashboard__header-actions\">\n            <div class=\"workspace-dashboard__subflows-toggle\">\n              <p-toggle v-model=\"filter.hideSubflows\" append=\"Hide subflows\" />\n            </div>\n            <FlowRunTagsInput v-model:selected=\"filter.tags\" empty-message=\"All tags\" />\n            <DateRangeSelect v-model=\"filter.range\" class=\"workspace-dashboard__date-select\" />\n          </div>\n        </template>\n      </PageHeading>\n    </template>\n    <template v-if=\"loaded\">\n      <template v-if=\"empty\">\n        <FlowRunsPageEmptyState />\n      </template>\n      <template v-else>\n        <div class=\"workspace-dashboard__grid\">\n          <WorkspaceDashboardFlowRunsCard :filter=\"filter\" />\n          <div class=\"workspace-dashboard__side\">\n            <CumulativeTaskRunsCard :filter=\"tasksFilter\" />\n            <DashboardWorkPoolsCard class=\"workspace-dashboard__work-pools\" :filter=\"filter\" />\n          </div>\n        </div>\n      </template>\n    </template>\n    <MarketingBanner\n      v-if=\"showPromotionalContent\"\n      title=\"Ready to scale?\"\n      subtitle=\"Webhooks, role and object-level security, and serverless push work pools on Prefect Cloud\"\n    >\n      <template #actions>\n        <p-button to=\"https://www.prefect.io/cloud-vs-oss?utm_source=oss&utm_medium=oss&utm_campaign=oss&utm_term=none&utm_content=none\" target=\"_blank\" primary>\n          Upgrade to Cloud\n        </p-button>\n      </template>\n    </MarketingBanner>\n  </p-layout-default>\n</template>\n\n<script setup lang=\"ts\">\n  import { Crumb } from '@prefecthq/prefect-design'\n  import {\n    DashboardWorkPoolsCard,\n    WorkspaceDashboardFlowRunsCard,\n    CumulativeTaskRunsCard,\n    PageHeading,\n    FlowRunTagsInput,\n    FlowRunsPageEmptyState,\n    useWorkspaceApi,\n    subscriptionIntervalKey,\n    mapper,\n    TaskRunsFilter,\n    MarketingBanner,\n    Getter,\n    DateRangeSelect,\n    useWorkspaceDashboardFilterFromRoute,\n    dateFunctions,\n    secondsInDay\n  } from '@prefecthq/prefect-ui-library'\n  import { useSubscription } from '@prefecthq/vue-compositions'\n  import { computed, provide } from 'vue'\n  import { usePrefectApi } from '@/compositions/usePrefectApi'\n\n  provide(subscriptionIntervalKey, {\n    interval: dateFunctions.secondsToMilliseconds(30),\n  })\n\n  const api = useWorkspaceApi()\n  const prefectApi = usePrefectApi()\n  const serverSettings = await prefectApi.admin.getSettings()\n  const showPromotionalContent = computed(() => serverSettings.server.ui.show_promotional_content)\n\n  // Cache to localStorage for use in error toasts\n  localStorage.setItem('prefect-show-promotional-content', String(showPromotionalContent.value))\n  const flowRunsCountAllSubscription = useSubscription(api.flowRuns.getFlowRunsCount, [{}])\n  const loaded = computed(() => flowRunsCountAllSubscription.executed)\n  const empty = computed(() => flowRunsCountAllSubscription.response === 0)\n  const crumbs: Crumb[] = [{ text: 'Dashboard' }]\n\n  const filter = useWorkspaceDashboardFilterFromRoute({\n    range: { type: 'span', seconds: -secondsInDay },\n    tags: [],\n  })\n\n  const tasksFilter: Getter<TaskRunsFilter> = () => mapper.map('WorkspaceDashboardFilter', filter, 'TaskRunsFilter')\n</script>\n\n<style>\n.workspace-dashboard__page-heading { @apply\n  grid\n  md:flex\n  md:flex-row\n  md:items-center\n  min-h-11\n}\n\n.workspace-dashboard__header-actions { @apply\n  flex\n  flex-col\n  w-full\n  max-w-full\n  gap-2\n  md:w-auto\n  md:inline-flex\n  md:flex-row\n  items-center\n}\n\n.workspace-dashboard__date-select { @apply\n  min-w-0\n}\n\n.workspace-dashboard__grid { @apply\n  grid\n  grid-cols-1\n  gap-4\n  items-start\n  xl:grid-cols-2\n}\n\n.workspace-dashboard__side { @apply\n  grid\n  grid-cols-1\n  gap-4\n}\n\n.workspace-dashboard__subflows-toggle { @apply\n  pr-2\n  w-full\n  md:w-auto\n}\n</style>"],"names":["provide","subscriptionIntervalKey","dateFunctions","api","useWorkspaceApi","prefectApi","usePrefectApi","serverSettings","__temp","__restore","_withAsyncContext","showPromotionalContent","computed","flowRunsCountAllSubscription","useSubscription","loaded","empty","crumbs","filter","useWorkspaceDashboardFilterFromRoute","secondsInDay","tasksFilter","mapper","_createBlock","_component_p_layout_default","_createVNode","_unref","PageHeading","_createElementVNode","_hoisted_1","_hoisted_2","_component_p_toggle","_cache","$event","FlowRunTagsInput","DateRangeSelect","_createElementBlock","_Fragment","FlowRunsPageEmptyState","_openBlock","_hoisted_3","WorkspaceDashboardFlowRunsCard","_hoisted_4","CumulativeTaskRunsCard","DashboardWorkPoolsCard","MarketingBanner","_component_p_button"],"mappings":"4jBAmEEA,EAAQC,EAAyB,CAC/B,SAAUC,EAAc,sBAAsB,EAAE,CAAA,CACjD,EAED,MAAMC,EAAMC,EAAA,EACNC,EAAaC,EAAA,EACbC,GAAiB,CAAAC,EAAAC,CAAA,EAAAC,EAAA,IAAML,EAAW,MAAM,YAAA,CAAY,mBACpDM,EAAyBC,EAAS,IAAML,EAAe,OAAO,GAAG,wBAAwB,EAG/F,aAAa,QAAQ,mCAAoC,OAAOI,EAAuB,KAAK,CAAC,EAC7F,MAAME,EAA+BC,EAAgBX,EAAI,SAAS,iBAAkB,CAAC,CAAA,CAAE,CAAC,EAClFY,EAASH,EAAS,IAAMC,EAA6B,QAAQ,EAC7DG,EAAQJ,EAAS,IAAMC,EAA6B,WAAa,CAAC,EAClEI,EAAkB,CAAC,CAAE,KAAM,YAAa,EAExCC,EAASC,EAAqC,CAClD,MAAO,CAAE,KAAM,OAAQ,QAAS,CAACC,CAAA,EACjC,KAAM,CAAA,CAAC,CACR,EAEKC,EAAsC,IAAMC,EAAO,IAAI,2BAA4BJ,EAAQ,gBAAgB,0FAvFjHK,EAuCmBC,EAAA,CAvCD,MAAM,uBAAqB,CAChC,SACT,IAUc,CAVdC,EAUcC,EAAAC,CAAA,EAAA,CAVA,OAAAV,EAAgB,MAAM,mCAAA,WAClBF,EAAA,QAAWC,EAAA,YAAQ,eACjC,IAMM,CANNY,EAMM,MANNC,EAMM,CALJD,EAEM,MAFNE,EAEM,CADJL,EAAiEM,EAAA,CAA9C,WAAAL,EAAAR,CAAA,EAAO,aAAP,sBAAAc,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAP,EAAAR,CAAA,EAAO,aAAYe,GAAE,OAAO,eAAA,2BAEjDR,EAA4EC,EAAAQ,CAAA,EAAA,CAAlD,SAAUR,EAAAR,CAAA,EAAO,KAAP,oBAAAc,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAP,EAAAR,CAAA,EAAO,KAAIe,GAAE,gBAAc,UAAA,uBAC/DR,EAAmFC,EAAAS,CAAA,EAAA,CAAzD,WAAAT,EAAAR,CAAA,EAAO,MAAP,sBAAAc,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAP,EAAAR,CAAA,EAAO,MAAKe,GAAE,MAAM,kCAAA,iEAKtD,IAaW,CAbKlB,EAAA,WAAhBqB,EAaWC,EAAA,CAAA,IAAA,GAAA,CAZOrB,EAAA,WACdO,EAA0BG,EAAAY,CAAA,EAAA,CAAA,IAAA,EAAA,IAG1BC,IAAAH,EAMM,MANNI,EAMM,CALJf,EAAmDC,EAAAe,CAAA,EAAA,CAAlB,OAAQf,EAAAR,CAAA,CAAA,EAAM,KAAA,EAAA,CAAA,QAAA,CAAA,EAC/CU,EAGM,MAHNc,EAGM,CAFJjB,EAAgDC,EAAAiB,CAAA,EAAA,CAAvB,OAAQtB,EAAW,EAC5CI,EAAmFC,EAAAkB,CAAA,EAAA,CAA3D,MAAM,kCAAmC,OAAQlB,EAAAR,CAAA,CAAA,yCAMzEP,EAAA,WADRY,EAUkBG,EAAAmB,CAAA,EAAA,OARhB,MAAM,kBACN,SAAS,2FAAA,GAEE,UACT,IAEW,CAFXpB,EAEWqB,EAAA,CAFD,GAAG,oHAAoH,OAAO,SAAS,QAAA,EAAA,aAAQ,IAEzJ,CAAA,GAAAd,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFyJ,qBAEzJ,EAAA,CAAA"}