import{d as F,aS as A,aT as R,aU as B,S as U,K as D,g as d,j as N,aV as T,h as c,c as u,o as n,i as l,n as w,a as k,F as j,m as e,aW as H,k as o,l as i,aX as P,aY as W,y as G,aZ as E,a_ as I,D as K,A as L,H as M,a$ as O,ay as X,aC as Y}from"./index-BRrm8IYN.js";import{u as Z}from"./usePrefectApi-CPise1aa.js";import"./mapper-DJ53lQ_S.js";const $={class:"workspace-dashboard__header-actions"},q={class:"workspace-dashboard__subflows-toggle"},z={key:1,class:"workspace-dashboard__grid"},J={class:"workspace-dashboard__side"},te=F({__name:"Dashboard",async setup(Q){let r,p;A(B,{interval:R.secondsToMilliseconds(30)});const b=U(),h=Z(),v=([r,p]=D(()=>h.admin.getSettings()),r=await r,p(),r),_=d(()=>v.server.ui.show_promotional_content);localStorage.setItem("prefect-show-promotional-content",String(_.value));const m=N(b.flowRuns.getFlowRunsCount,[{}]),f=d(()=>m.executed),g=d(()=>m.response===0),y=[{text:"Dashboard"}],s=T({range:{type:"span",seconds:-Y},tags:[]}),C=()=>G.map("WorkspaceDashboardFilter",s,"TaskRunsFilter");return(ee,a)=>{const S=c("p-toggle"),V=c("p-button"),x=c("p-layout-default");return n(),u(x,{class:"workspace-dashboard"},{header:l(()=>[o(e(L),{crumbs:y,class:"workspace-dashboard__page-heading"},M({_:2},[f.value&&!g.value?{name:"actions",fn:l(()=>[i("div",$,[i("div",q,[o(S,{modelValue:e(s).hideSubflows,"onUpdate:modelValue":a[0]||(a[0]=t=>e(s).hideSubflows=t),append:"Hide subflows"},null,8,["modelValue"])]),o(e(O),{selected:e(s).tags,"onUpdate:selected":a[1]||(a[1]=t=>e(s).tags=t),"empty-message":"All tags"},null,8,["selected"]),o(e(X),{modelValue:e(s).range,"onUpdate:modelValue":a[2]||(a[2]=t=>e(s).range=t),class:"workspace-dashboard__date-select"},null,8,["modelValue"])])]),key:"0"}:void 0]),1024)]),default:l(()=>[f.value?(n(),w(j,{key:0},[g.value?(n(),u(e(H),{key:0})):(n(),w("div",z,[o(e(P),{filter:e(s)},null,8,["filter"]),i("div",J,[o(e(W),{filter:C}),o(e(E),{class:"workspace-dashboard__work-pools",filter:e(s)},null,8,["filter"])])]))],64)):k("",!0),_.value?(n(),u(e(I),{key:1,title:"Ready to scale?",subtitle:"Webhooks, role and object-level security, and serverless push work pools on Prefect Cloud"},{actions:l(()=>[o(V,{to:"https://www.prefect.io/cloud-vs-oss?utm_source=oss&utm_medium=oss&utm_campaign=oss&utm_term=none&utm_content=none",target:"_blank",primary:""},{default:l(()=>[...a[3]||(a[3]=[K(" Upgrade to Cloud ",-1)])]),_:1})]),_:1})):k("",!0)]),_:1})}}});export{te as default};
//# sourceMappingURL=Dashboard-Bhe8HF89.js.map
