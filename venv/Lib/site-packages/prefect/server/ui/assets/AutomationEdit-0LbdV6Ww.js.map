{"version":3,"file":"AutomationEdit-0LbdV6Ww.js","sources":["../../src/pages/AutomationEdit.vue"],"sourcesContent":["<template>\n  <p-layout-default class=\"workspace-automation-create\">\n    <template #header>\n      <PageHeading :crumbs=\"crumbs\">\n        <template #actions>\n          <DocumentationButton :to=\"localization.docs.automations\">\n            Documentation\n          </DocumentationButton>\n        </template>\n      </PageHeading>\n    </template>\n\n    <AutomationWizard :automation=\"automation\" editing @submit=\"submit\" />\n  </p-layout-default>\n</template>\n\n<script lang=\"ts\" setup>\n  import { BreadCrumbs, showToast } from '@prefecthq/prefect-design'\n  import { PageHeading, DocumentationButton, getApiErrorMessage, useWorkspaceRoutes, localization } from '@prefecthq/prefect-ui-library'\n  import { useRouteParam } from '@prefecthq/vue-compositions'\n  import { computed } from 'vue'\n  import { useRouter } from 'vue-router'\n  import AutomationWizard from '@/components/AutomationWizard.vue'\n  import { usePageTitle } from '@/compositions/usePageTitle'\n  import { usePrefectApi } from '@/compositions/usePrefectApi'\n  import { Automation } from '@/types/automation'\n\n  const api = usePrefectApi()\n  const routes = useWorkspaceRoutes()\n  const router = useRouter()\n  const automationId = useRouteParam('automationId')\n  const automation = await api.automations.getAutomation(automationId.value)\n\n  usePageTitle(`Edit Automation: ${automation.name}`)\n\n  const crumbs = computed<BreadCrumbs>(() => [\n    { text: 'Automations', to: routes.automations() },\n    { text: automation.name },\n  ])\n\n  async function submit(automation: Automation): Promise<void> {\n    try {\n      await api.automations.updateAutomation(automationId.value, automation)\n\n      showToast(localization.success.automationUpdate)\n\n      router.push(routes.automations())\n    } catch (error) {\n      console.error(error)\n      const message = getApiErrorMessage(error, localization.error.automationUpdate)\n      showToast(message, 'error', { timeout: false })\n    }\n  }\n</script>"],"names":["api","usePrefectApi","routes","useWorkspaceRoutes","router","useRouter","automationId","useRouteParam","automation","__temp","__restore","_withAsyncContext","usePageTitle","crumbs","computed","submit","showToast","localization","error","message","getApiErrorMessage","_createBlock","_component_p_layout_default","_createVNode","_unref","PageHeading","DocumentationButton","_cache","AutomationWizard"],"mappings":"uaA2BE,MAAMA,EAAMC,EAAA,EACNC,EAASC,EAAA,EACTC,EAASC,EAAA,EACTC,EAAeC,EAAc,cAAc,EAC3CC,GAAa,CAAAC,EAAAC,CAAA,EAAAC,EAAA,IAAMX,EAAI,YAAY,cAAcM,EAAa,KAAK,CAAA,mBAEzEM,EAAa,oBAAoBJ,EAAW,IAAI,EAAE,EAElD,MAAMK,EAASC,EAAsB,IAAM,CACzC,CAAE,KAAM,cAAe,GAAIZ,EAAO,aAAY,EAC9C,CAAE,KAAMM,EAAW,IAAA,CAAK,CACzB,EAED,eAAeO,EAAOP,EAAuC,CAC3D,GAAI,CACF,MAAMR,EAAI,YAAY,iBAAiBM,EAAa,MAAOE,CAAU,EAErEQ,EAAUC,EAAa,QAAQ,gBAAgB,EAE/Cb,EAAO,KAAKF,EAAO,aAAa,CAClC,OAASgB,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnB,MAAMC,EAAUC,EAAmBF,EAAOD,EAAa,MAAM,gBAAgB,EAC7ED,EAAUG,EAAS,QAAS,CAAE,QAAS,GAAO,CAChD,CACF,wDAnDAE,EAYmBC,EAAA,CAZD,MAAM,+BAA6B,CACxC,SACT,IAMc,CANdC,EAMcC,EAAAC,CAAA,EAAA,CANA,OAAQZ,EAAA,OAAM,CACf,UACT,IAEsB,CAFtBU,EAEsBC,EAAAE,CAAA,EAAA,CAFA,GAAIF,EAAAP,CAAA,EAAa,KAAK,WAAA,aAAa,IAEzD,CAAA,GAAAU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFyD,kBAEzD,EAAA,CAAA,qDAKN,IAAsE,CAAtEJ,EAAsEK,EAAA,CAAnD,WAAYJ,EAAAhB,CAAA,EAAY,QAAA,GAAS,SAAQO,CAAA"}