{"version":3,"file":"WorkPool-DvcSLUL2.js","sources":["../../src/pages/WorkPool.vue"],"sourcesContent":["<template>\n  <p-layout-well v-if=\"workPool\" class=\"work-pool\">\n    <template #header>\n      <PageHeadingWorkPool :work-pool=\"workPool\" @update=\"workPoolSubscription.refresh\" />\n      <template v-if=\"showCodeBanner\">\n        <CodeBanner class=\"work-pool__code-banner\" :command=\"codeBannerCliCommand\" title=\"Your work pool is almost ready!\" subtitle=\"Run this command to start.\" />\n      </template>\n    </template>\n    <p-tabs v-model:selected=\"tab\" :tabs=\"tabs\">\n      <template #details>\n        <WorkPoolDetails :work-pool=\"workPool\" />\n      </template>\n\n      <template #runs>\n        <FlowRunFilteredList :filter=\"flowRunFilter\" prefix=\"runs\" />\n      </template>\n\n      <template #work-queues>\n        <WorkPoolQueuesTable :work-pool-name=\"workPoolName\" />\n      </template>\n\n      <template #workers>\n        <WorkersTable :work-pool-name=\"workPoolName\" />\n      </template>\n\n      <template #deployments>\n        <DeploymentList :filter=\"deploymentsFilter\" />\n      </template>\n    </p-tabs>\n\n    <template #well>\n      <WorkPoolDetails alternate :work-pool=\"workPool\" />\n    </template>\n  </p-layout-well>\n</template>\n\n<script lang=\"ts\" setup>\n  import { media } from '@prefecthq/prefect-design'\n  import {\n    useWorkspaceApi,\n    PageHeadingWorkPool,\n    WorkPoolDetails,\n    FlowRunFilteredList,\n    WorkPoolQueuesTable,\n    useFlowRunsFilter,\n    useTabs,\n    WorkersTable,\n    CodeBanner,\n    DeploymentList,\n    useDeploymentsFilter\n  } from '@prefecthq/prefect-ui-library'\n  import { useRouteParam, useRouteQueryParam, useSubscription } from '@prefecthq/vue-compositions'\n  import { computed } from 'vue'\n  import { usePageTitle } from '@/compositions/usePageTitle'\n\n  const api = useWorkspaceApi()\n  const workPoolName = useRouteParam('workPoolName')\n\n  const subscriptionOptions = {\n    interval: 300000,\n  }\n  const workPoolSubscription = useSubscription(api.workPools.getWorkPoolByName, [workPoolName.value], subscriptionOptions)\n  const workPool = computed(() => workPoolSubscription.response)\n  const isAgentWorkPool = computed(() => workPool.value?.type === 'prefect-agent')\n\n  const computedTabs = computed(() => [\n    { label: 'Details', hidden: media.xl },\n    { label: 'Runs' },\n    { label: 'Work Queues' },\n    { label: 'Workers', hidden: isAgentWorkPool.value },\n    { label: 'Deployments' },\n  ])\n\n  const tab = useRouteQueryParam('tab', 'Details')\n  const { tabs } = useTabs(computedTabs, tab)\n\n  const showCodeBanner = computed(() => workPool.value?.status !== 'ready')\n  const codeBannerCliCommand = computed(() => `prefect ${isAgentWorkPool.value ? 'agent' : 'worker'} start --pool \"${workPool.value?.name}\"`)\n\n  const { filter: flowRunFilter } = useFlowRunsFilter({\n    workPools: {\n      name: [workPoolName.value],\n    },\n  })\n\n  const { filter: deploymentsFilter } = useDeploymentsFilter({\n    workPools: {\n      name: [workPoolName.value],\n    },\n  })\n\n  const title = computed(() => {\n    if (!workPool.value) {\n      return 'Work Pool'\n    }\n    return `Work Pool: ${workPool.value.name}`\n  })\n\n  usePageTitle(title)\n</script>\n\n<style>\n.work-pool__code-banner { @apply\n  mt-4\n}\n</style>"],"names":["api","useWorkspaceApi","workPoolName","useRouteParam","subscriptionOptions","workPoolSubscription","useSubscription","workPool","computed","isAgentWorkPool","computedTabs","media","tab","useRouteQueryParam","tabs","useTabs","showCodeBanner","codeBannerCliCommand","flowRunFilter","useFlowRunsFilter","deploymentsFilter","useDeploymentsFilter","title","usePageTitle","_createBlock","_component_p_layout_well","_createVNode","_unref","PageHeadingWorkPool","CodeBanner","WorkPoolDetails","_component_p_tabs","$event","FlowRunFilteredList","WorkPoolQueuesTable","WorkersTable","DeploymentList"],"mappings":"kTAuDE,MAAMA,EAAMC,EAAA,EACNC,EAAeC,EAAc,cAAc,EAE3CC,EAAsB,CAC1B,SAAU,GAAA,EAENC,EAAuBC,EAAgBN,EAAI,UAAU,kBAAmB,CAACE,EAAa,KAAK,EAAGE,CAAmB,EACjHG,EAAWC,EAAS,IAAMH,EAAqB,QAAQ,EACvDI,EAAkBD,EAAS,IAAMD,EAAS,OAAO,OAAS,eAAe,EAEzEG,EAAeF,EAAS,IAAM,CAClC,CAAE,MAAO,UAAW,OAAQG,EAAM,EAAA,EAClC,CAAE,MAAO,MAAA,EACT,CAAE,MAAO,aAAA,EACT,CAAE,MAAO,UAAW,OAAQF,EAAgB,KAAA,EAC5C,CAAE,MAAO,aAAA,CAAc,CACxB,EAEKG,EAAMC,EAAmB,MAAO,SAAS,EACzC,CAAE,KAAAC,CAAA,EAASC,EAAQL,EAAcE,CAAG,EAEpCI,EAAiBR,EAAS,IAAMD,EAAS,OAAO,SAAW,OAAO,EAClEU,EAAuBT,EAAS,IAAM,WAAWC,EAAgB,MAAQ,QAAU,QAAQ,kBAAkBF,EAAS,OAAO,IAAI,GAAG,EAEpI,CAAE,OAAQW,CAAA,EAAkBC,EAAkB,CAClD,UAAW,CACT,KAAM,CAACjB,EAAa,KAAK,CAAA,CAC3B,CACD,EAEK,CAAE,OAAQkB,CAAA,EAAsBC,EAAqB,CACzD,UAAW,CACT,KAAM,CAACnB,EAAa,KAAK,CAAA,CAC3B,CACD,EAEKoB,EAAQd,EAAS,IAChBD,EAAS,MAGP,cAAcA,EAAS,MAAM,IAAI,GAF/B,WAGV,EAED,OAAAgB,EAAaD,CAAK,0DAjGGf,EAAA,WAArBiB,EAgCgBC,EAAA,OAhCe,MAAM,WAAA,GACxB,SACT,IAAoF,CAApFC,EAAoFC,EAAAC,CAAA,EAAA,CAA9D,YAAWrB,EAAA,MAAW,SAAQoB,EAAAtB,CAAA,EAAqB,OAAA,mCACzDW,EAAA,WACdQ,EAA2JG,EAAAE,CAAA,EAAA,OAA/I,MAAM,yBAA0B,QAASZ,EAAA,MAAsB,MAAM,kCAAkC,SAAS,4BAAA,kCAyBrH,OACT,IAAmD,CAAnDS,EAAmDC,EAAAG,CAAA,EAAA,CAAlC,UAAA,GAAW,YAAWvB,EAAA,KAAA,oCAvBzC,IAoBS,CApBTmB,EAoBSK,EAAA,CApBO,SAAUJ,EAAAf,CAAA,0CAAAA,EAAG,MAAAoB,EAAA,MAAG,KAAML,EAAAb,CAAA,CAAA,GACzB,UACT,IAAyC,CAAzCY,EAAyCC,EAAAG,CAAA,EAAA,CAAvB,YAAWvB,EAAA,OAAQ,KAAA,EAAA,CAAA,WAAA,CAAA,CAAA,GAG5B,OACT,IAA6D,CAA7DmB,EAA6DC,EAAAM,CAAA,EAAA,CAAvC,OAAQN,EAAAT,CAAA,EAAe,OAAO,MAAA,uBAG3C,gBACT,IAAsD,CAAtDQ,EAAsDC,EAAAO,CAAA,EAAA,CAAhC,iBAAgBP,EAAAzB,CAAA,GAAY,KAAA,EAAA,CAAA,gBAAA,CAAA,CAAA,GAGzC,UACT,IAA+C,CAA/CwB,EAA+CC,EAAAQ,CAAA,EAAA,CAAhC,iBAAgBR,EAAAzB,CAAA,GAAY,KAAA,EAAA,CAAA,gBAAA,CAAA,CAAA,GAGlC,cACT,IAA8C,CAA9CwB,EAA8CC,EAAAS,CAAA,EAAA,CAA7B,OAAQT,EAAAP,CAAA,GAAiB,KAAA,EAAA,CAAA,QAAA,CAAA,CAAA"}